<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700italic,700"
      rel="stylesheet"
      type="text/css"
    />

    <title>Scratch Card</title>
    <link rel="stylesheet" href="/style.css" />
    <style type="text/css"></style>
  </head>
  <img
    src="https://cdn.glitch.global/9c6f1cae-aa7b-4345-8f94-30454f6b1066/logo.png?v=1666113835227"
    class="logo"
  />
  <body style="background-color: #34a56f" onload="init()">
    <div class="board-container">
      <div class="board">
        <div class="scratch-container">
          <div id="box00" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box01" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box02" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box10" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box11" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box12" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box20" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box21" class="scratchpad"></div>
        </div>

        <div class="scratch-container">
          <div id="box22" class="scratchpad"></div>
        </div>
      </div>
    </div>

    <script
      src="//code.jquery.com/jquery-latest.min.js"
      type="text/javascript"
    ></script>
    <script src="/wScratchPad.min.js" type="text/javascript"></script>

    <script type="text/javascript">
      let boxes = [
        [0, 0, 0],
        [0, 0, 0],
        [0, 0, 0],
      ];

      let boxes0 = [
        [7, 7, 7],
        [0, 0, 0],
        [0, 0, 0],
      ];

      let boxes1 = [
        [0, 0, 0],
        [7, 7, 7],
        [0, 0, 0],
      ];

      let boxes2 = [
        [0, 0, 0],
        [0, 0, 0],
        [7, 7, 7],
      ];

      let boxes3 = [
        [7, 0, 0],
        [0, 7, 0],
        [0, 0, 7],
      ];

      let boxes4 = [
        [0, 0, 7],
        [0, 7, 0],
        [7, 0, 0],
      ];

      let boxes5 = [
        [7, 0, 0],
        [7, 0, 0],
        [7, 0, 0],
      ];

      let boxes6 = [
        [0, 7, 0],
        [0, 7, 0],
        [0, 7, 0],
      ];

      let boxes7 = [
        [0, 0, 7],
        [0, 0, 7],
        [0, 0, 7],
      ];

      let sevenCount = 0;

      let box00 = false;
      let box01 = false;
      let box02 = false;

      let box10 = false;
      let box11 = false;
      let box12 = false;

      let box20 = false;
      let box21 = false;
      let box22 = false;

      function checkSeven() {
        if (sevenCount == 3) {
          window.close();
          window.location.href = document.location = "unlock.html";
        }
      }

      var selectBG = "";

      function getBackground(i) {
        if (i == 7) {
          return "https://cdn.glitch.global/9c6f1cae-aa7b-4345-8f94-30454f6b1066/red-rounded-square-with-number-7-md.png?v=1666115838239";
        }
        if (i != 7) {
          return "#cacaca";
        }
      }

      function initPad() {
        $("#box00").wScratchPad({
          size: 30,
          bg: getBackground(boxes[0][0]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box00 == false && boxes[0][0] == 7) {
              sevenCount++;
              box00 = true;
              checkSeven();
            }
          },
        });
        $("#box01").wScratchPad({
          size: 30,
          bg: getBackground(boxes[0][1]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box01 == false && boxes[0][1] == 7) {
              sevenCount++;
              box01 = true;
              checkSeven();
            }
          },
        });
        $("#box02").wScratchPad({
          size: 30,
          bg: getBackground(boxes[0][2]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box02 == false && boxes[0][2] == 7) {
              sevenCount++;
              box02 = true;
              checkSeven();
            }
          },
        });
        $("#box10").wScratchPad({
          size: 30,
          bg: getBackground(boxes[1][0]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box10 == false && boxes[1][0] == 7) {
              sevenCount++;
              box10 = true;
              checkSeven();
            }
          },
        });
        $("#box11").wScratchPad({
          size: 30,
          bg: getBackground(boxes[1][1]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box11 == false && boxes[1][1] == 7) {
              sevenCount++;
              box11 = true;
              checkSeven();
            }
          },
        });
        $("#box12").wScratchPad({
          size: 30,
          bg: getBackground(boxes[1][2]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box12 == false && boxes[1][2] == 7) {
              sevenCount++;
              box12 = true;
              checkSeven();
            }
          },
        });
        $("#box20").wScratchPad({
          size: 30,
          bg: getBackground(boxes[2][0]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box20 == false && boxes[2][0] == 7) {
              sevenCount++;
              box20 = true;
              checkSeven();
            }
          },
        });
        $("#box21").wScratchPad({
          size: 30,
          bg: getBackground(boxes[2][1]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box21 == false && boxes[2][1] == 7) {
              sevenCount++;
              box21 = true;
              checkSeven();
            }
          },
        });
        $("#box22").wScratchPad({
          size: 30,
          bg: getBackground(boxes[2][2]),
          realtime: true,
          fg: "#808080",
          cursor: "",
          scratchMove: function (e, percent) {
            console.log(percent);
            if (percent > 50 && box22 == false && boxes[2][2] == 7) {
              sevenCount++;
              box22 = true;
              checkSeven();
            }
          },
        });
      };
      
            function init() {
        let num = Math.floor(Math.random() * 8);
        let i = 0;
        let j = 0;

        for (i = 0; i < 3; i++) {
          for (j = 0; j < 3; j++) {
            if (num == 0) {
              boxes[i][j] = boxes0[i][j];
            }
            if (num == 1) {
              boxes[i][j] = boxes1[i][j];
            }
            if (num == 2) {
              boxes[i][j] = boxes2[i][j];
            }
            if (num == 3) {
              boxes[i][j] = boxes3[i][j];
            }
            if (num == 4) {
              boxes[i][j] = boxes4[i][j];
            }
            if (num == 5) {
              boxes[i][j] = boxes5[i][j];
            }
            if (num == 6) {
              boxes[i][j] = boxes6[i][j];
            }
            if (num == 7) {
              boxes[i][j] = boxes7[i][j];
            }

            if (boxes[i][j] == 0) {
              let randNum = Math.floor(Math.random() * 9); // get number 0-8
              if (randNum == 7) {
                randNum = 9; // change 7 to a 9 (so basically a random number 0-9 not including 7)
              }
              boxes[i][j] = randNum;
            }
            console.log(boxes[i][j]);
          }
        }
        initPad();
      };
    </script>
  </body>
</html>
